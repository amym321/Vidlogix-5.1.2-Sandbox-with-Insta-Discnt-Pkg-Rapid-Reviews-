{% comment %}add Rapid Reviews, remove Junip - am{% endcomment %}
<div id="rapid_reviews_global_reviews_badge" class="rapid_reviews_global_reviews_badge"></div>

<div id="rapid_reviews_global_featured_list" class="rapid_reviews_global_featured_list"></div>

<script>
  // DATA DEFINITION FROM SHOPIFY METAFIELDS
  // ONLY NEEDED ONCE PER PAGE
  window.rapid_reviews_global_data = window.rapid_reviews_global_data || {
    data: {% if shop.metafields.rapid_reviews.data %}{{ shop.metafields.rapid_reviews.data }}{% else %}null{% endif %},
    counts: {% if shop.metafields.rapid_reviews.counts %}{{ shop.metafields.rapid_reviews.counts }}{% else %}null{% endif %}
  }

  // GLOBAL WIDGET SCRIPT - DIFFERENT FROM CORE SCRIPT
  // ONLY NEEDED ONCE PER PAGE
  ;(function(){
    if (window.r_u_g_loaded) return; window.r_u_g_loaded = 1;
    var rvsc = document.createElement('script'); rvsc.type = 'text/javascript'; rvsc.async = 'true';
    rvsc.src = 'https://apps.belkapp.com/api/reviews/files/{{ shop.permanent_domain }}/rapid-reviews-global';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(rvsc, s);
  })();
</script>

<style>
  .rapid_reviews_global_featured_list > .r_inner {
    max-height: none;
  }
</style>


{% comment %}removed Junip - am{% endcomment %}{% comment %}
  <span
   class="junip-review-section"
   style="display: none"
   data-layout={{section.settings.layout}}
   data-reviews-type={{section.settings.reviewsType}}
   data-show-summary={{section.settings.showSummary}}
   data-reviews-count={{section.settings.reviewsCount}}>
    <span class="junip-review-section-wrapper"></span>
  </span>
{% endcomment %}

{% schema %}
  {
    "name": "Site & product reviews",
    "settings": [
      {
        "type": "select",
        "id": "layout",
        "label": "Layout",
        "options": [
          { "value": "list", "label": "List"},
          { "value": "grid", "label": "Grid"}
        ],
        "default": "list",
        "info": "The layout of the reviews"
      },
      {
        "type": "select",
        "id": "reviewsType",
        "label": "Type of reviews to show",
        "options": [
          { "value": "all", "label": "All"},
          { "value": "product_reviews", "label": "Product reviews"},
          { "value": "store_reviews", "label": "Store reviews"}
        ],
        "default": "all",
        "info": "The type of reviews to show"
      },
      {
        "type": "checkbox",
        "id": "showSummary",
        "label": "Show review summary",
        "default": false,
        "info": "Enabling this will show a review summary at the top of the section"
      },
      {
        "type": "range",
        "id": "reviewsCount",
        "min": 3,
        "max": 20,
        "step": 1,
        "label": "Number of reviews to show",
        "default": 10,
        "info": "The number of reviews to show"
      }
    ],
    "presets": [
      {
        "name": "Site & product reviews",
        "category": "Promotional"
      }
    ]
  }
{% endschema %}
